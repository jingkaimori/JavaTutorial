---
mermaid: true
---
# 容器与集合

<div class="mermaid">
flowchart TB;
Map --> SortedMap;
Collection --> Set & List & Queue & Deque;
Set --> SortedSet;
</div>

## 集合
### 键值对
### 无序集合
### 数组
#### 原生数组 vs. util 数组

util包里的各种集合类相当于C++的标准库数组`vector<int>`，除了这种数组以外，Java还有一种原生数组，这种数组类似于C的数组`int a[]`。

为什么不讲原生的数组，是因为原始数组是“协变”的，也就是说可以把父类数组的值（可能包含任何子类甚至父类）赋值给子类数组引用，这一特性会导致严重的堆污染：

```java
public static void f() {
    String[] a = new String[2];
    Object[] b = a;
    a[0] = "hi";
    b[1] = Integer.valueOf(42);
}
```

上例节选自[一道Java面试题 - 王垠](https://www.yinwang.org/blog-cn/2020/02/13/java-type-system)，此例中，字符串数组被赋值给`Object`对象数组，该数组应该只接受`Object`类型对象，而不接受其他类型的值。但是由于数组是协变的，因此数组内的各元素可能是父类，原来的子类和其他不相容的子类。

## 迭代
### for-each 循环
### forEach 方法

## 流

上面的数据结构中，各个元素都是预先计算好的具体值，但是有的时候，

流是调用函数来获得一系列
### 用流来遍历